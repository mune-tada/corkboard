/* コネクタ（矢印） */

#corkboard-container .connector-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
  z-index: 1;
  pointer-events: auto;
  color: var(--vscode-editorLink-activeForeground, #4aa3ff);
}

#corkboard-container .link-path {
  stroke: var(--vscode-editorLink-activeForeground, #4aa3ff);
  stroke-width: 2;
  fill: none;
  color: var(--vscode-editorLink-activeForeground, #4aa3ff);
  pointer-events: stroke;
}

#corkboard-container .link-path.link-selected {
  stroke: var(--vscode-focusBorder);
  stroke-width: 3;
  color: var(--vscode-focusBorder);
}

#corkboard-container .link-temp {
  stroke: var(--vscode-editorLink-activeForeground, #4aa3ff);
  stroke-width: 2;
  fill: none;
  stroke-dasharray: 4 4;
  pointer-events: none;
}

#corkboard-container .link-label-fo {
  pointer-events: auto;
}

#corkboard-container .link-label {
  background: var(--vscode-editorWidget-background);
  color: var(--vscode-foreground);
  border: 1px solid var(--vscode-panel-border);
  border-radius: 12px;
  font-size: 11px;
  font-family: var(--vscode-font-family);
  padding: 2px 8px;
  white-space: nowrap;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  pointer-events: auto;
  cursor: text;
  user-select: none;
  display: inline-flex;
  align-items: center;
}

#corkboard-container .link-label.link-selected {
  border-color: var(--vscode-focusBorder);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
}

#corkboard-container .link-label-input {
  width: 100%;
  height: 100%;
  border: none;
  outline: none;
  background: transparent;
  color: var(--vscode-foreground);
  font-size: 11px;
  font-family: var(--vscode-font-family);
}

/* 接続ハンドル */
.card-connect-handles {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.card-connect-handle {
  --handle-scale: 0.6;
  --handle-offset: 8px;
  width: 10px;
  height: 10px;
  background: var(--vscode-button-background);
  border: 2px solid var(--vscode-editor-background);
  border-radius: 50%;
  position: absolute;
  opacity: 0;
  transform: translate(-50%, -50%) scale(var(--handle-scale));
  transition: opacity 0.15s ease, transform 0.15s ease;
  pointer-events: none;
  cursor: crosshair;
}

#corkboard-container.freeform-mode.connect-mode .card-connect-handle {
  --handle-scale: 1;
  opacity: 1;
  pointer-events: auto;
}

.card-connect-handle[data-handle="top"] {
  top: var(--handle-offset);
  left: 50%;
}

.card-connect-handle[data-handle="bottom"] {
  top: calc(100% - var(--handle-offset));
  left: 50%;
}

.card-connect-handle[data-handle="left"] {
  top: 50%;
  left: var(--handle-offset);
}

.card-connect-handle[data-handle="right"] {
  top: 50%;
  left: calc(100% - var(--handle-offset));
}

.card-connect-target {
  outline: 2px dashed var(--vscode-focusBorder);
  outline-offset: -2px;
}
